# Bootstrap Configuration for IAM Service
# Loaded before application.yml to configure service discovery and config server

spring:
  application:
    name: iam-service

  # Optional: Consul Service Discovery
  cloud:
    consul:
      enabled: ${SPRING_CLOUD_CONSUL_DISCOVERY_ENABLED:false}
      host: ${SPRING_CLOUD_CONSUL_HOST:localhost}
      port: ${SPRING_CLOUD_CONSUL_PORT:8500}
      discovery:
        enabled: ${SPRING_CLOUD_CONSUL_DISCOVERY_ENABLED:false}
        health-check-path: /actuator/health
        health-check-interval: 10s
        instance-id: ${SPRING_CLOUD_CONSUL_DISCOVERY_INSTANCE_ID:${spring.application.name}:${random.value}}
        service-name: ${spring.application.name}
        prefer-ip-address: true
        register: true
        deregister: true
        fail-fast: false
        tags:
          - version=1.0.0
          - layer=core
          - domain=auth

    # Optional: Config Server
    config:
      enabled: false

# Logging configuration
logging:
  level:
    org.springframework.cloud.consul: INFO
    com.neobrutalism.crm.iam: DEBUG
